<html>
<meta charset="UTF-8">
<head>
<link rel="stylesheet"
      href="https://unpkg.com/@chrisoakman/chessboardjs@1.0.0/dist/chessboard-1.0.0.min.css"
      integrity="sha384-q94+BZtLrkL1/ohfjR8c6L+A6qzNH9R2hBLwyoAfu3i/WCvQjzL2RQJ3uNHDISdU"
      crossorigin="anonymous">
 <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>
<script src="https://code.jquery.com/jquery-3.5.1.min.js"
        integrity="sha384-ZvpUoO/+PpLXR1lu4jmpXWu80pZlYUAfxl5NsBMWOEPSjUn/6Z/hRTt8+pR6L4N2"
        crossorigin="anonymous"></script>

<script src="https://unpkg.com/@chrisoakman/chessboardjs@1.0.0/dist/chessboard-1.0.0.min.js"
        integrity="sha384-8Vi8VHwn3vjQ9eUHUxex3JSN/NFqUg3QbPyX8kWyb93+8AC/pPWTzj+nHtbC5bxD"
        crossorigin="anonymous"></script>
<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.0.1/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-+0n0xVW2eSR5OomGNYDnhzAbDsOXxcvSN1TPprVMTNDbiYZCxYbOOl7+AMvyTG2x" crossorigin="anonymous">
<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.0.1/dist/js/bootstrap.bundle.min.js" integrity="sha384-gtEjrD/SeCtmISkJkNUaaKMoLD0//ElJ19smozuHV6z3Iehds+3Ulb9Bn9Plx0x4" crossorigin="anonymous"></script>

<script src="js/chess.js"></script>
<script src="js/aperturas.js"></script>
<script src="js/utils.js"></script>
<script>

var respuestasCorrectas;
var respuestasErroneas;
var jugadasVariantes;
var idsVariante;
var explicacionError;
var simulacionErrorCPU;
var simulacionErrorPlayer;
var contestacionCPU;
var movimiento=0;
var posicionInicial;
var isApertura;
var numeroApertura=0;
var $status;
var $fen;
var $pgn;
var $lastMove;
var $bestMove;
var $nombre;

var config = {
		  draggable: true,
		  position: 'start',
		  onDragStart: onDragStart,
		  onDrop: onDrop,
		  onMouseoutSquare: onMouseoutSquare,
		  onMouseoverSquare: onMouseoverSquare,
		  onSnapEnd: onSnapEnd
		}

function cargarApertura(numero,variante){
  isApertura=true;
  respuestasCorrectas=apertura[numero].variante[variante].jugadasPlayer;
  contestacionCPU=apertura[numero].variante[variante].jugadasCPU;

  respuestasErroneas=apertura[numero].variante[variante].jugadaError;
  explicacionError=apertura[numero].variante[variante].explicacionError;
  simulacionErrorPlayer=apertura[numero].variante[variante].simulacionErrorPlayer;
  simulacionErrorCPU=apertura[numero].variante[variante].simulacionErrorCPU;
  jugadasVariantes=apertura[numero].variante[variante].jugadasAlternativas;
  idsVariante=apertura[numero].variante[variante].variante;
}

function cargarAperturaInicial(numero,variante){
  
  $nombre.html('<h1>'+apertura[numero].nombre+'</h1>');
  posicionInicial=apertura[numero].posicionInicial;
  
  cargarApertura(numero,variante)
  
  board.orientation(apertura[numero].orientation)
  loadInitialPosition(posicionInicial)

  
}



$( document ).ready(function() {
	 $status = $('#status')
	 $fen = $('#fen')
	 $pgn = $('#pgn')
	 $lastMove = $('#lastMove')
	 $bestMove = $('#bestMove')
	 $nombre = $('#nombre')
	
	
	
	
	
	
		board = Chessboard('myBoard', config)
		
		//SI QUIERO CARGAR APERTURA
		console.log("Numero de aperturas disponibles: "+apertura.length)
		numeroApertura=getRandomMaxNumber(apertura.length);
		//QUITAR CUANDO NO QUIERA LA CARO KHAN
		console.log("Apertura numero "+numeroApertura);

		console.log("Numero de variantes disponibles: "+apertura[numeroApertura].variante.length)
		var numVariante=getRandomMaxNumber(apertura[numeroApertura].variante.length);

		console.log("Variante numero "+numVariante);

		cargarAperturaInicial(numeroApertura,numVariante);
});

</script>
</head>


<body>


<div id="nombre"> <h1>Nombre</h1> </div>
  <div id="myBoard" class="container col-sm-11 col-11 col-md-11 col-lg-6 col-xl-6"></div>
  <button id="startBtn">Start Position</button>
  <button id="clearBtn">Clear Board</button>
  <label>Status:</label>
  <div id="status"></div>
  <label>FEN:</label>
  <div id="fen"></div>
  <label>PGN:</label>
  <div id="pgn"></div>
  <label>Last Move:</label>
  <div id="lastMove"></div>
  <label>Best Move:</label>
  <div id="bestMove"></div>
  <label>Jugada Error:</label>
  <div id="bestMove"></div>
</body>
</html>