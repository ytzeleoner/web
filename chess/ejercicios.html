<html>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1">
<head>
<link rel="stylesheet"
      href="https://unpkg.com/@chrisoakman/chessboardjs@1.0.0/dist/chessboard-1.0.0.min.css"
      integrity="sha384-q94+BZtLrkL1/ohfjR8c6L+A6qzNH9R2hBLwyoAfu3i/WCvQjzL2RQJ3uNHDISdU"
      crossorigin="anonymous">
 <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>
<script src="https://code.jquery.com/jquery-3.5.1.min.js"
        integrity="sha384-ZvpUoO/+PpLXR1lu4jmpXWu80pZlYUAfxl5NsBMWOEPSjUn/6Z/hRTt8+pR6L4N2"
        crossorigin="anonymous"></script>

<script src="https://unpkg.com/@chrisoakman/chessboardjs@1.0.0/dist/chessboard-1.0.0.min.js"
        integrity="sha384-8Vi8VHwn3vjQ9eUHUxex3JSN/NFqUg3QbPyX8kWyb93+8AC/pPWTzj+nHtbC5bxD"
        crossorigin="anonymous"></script>
<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.0.1/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-+0n0xVW2eSR5OomGNYDnhzAbDsOXxcvSN1TPprVMTNDbiYZCxYbOOl7+AMvyTG2x" crossorigin="anonymous">
<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.0.1/dist/js/bootstrap.bundle.min.js" integrity="sha384-gtEjrD/SeCtmISkJkNUaaKMoLD0//ElJ19smozuHV6z3Iehds+3Ulb9Bn9Plx0x4" crossorigin="anonymous"></script>


<script src="js/chess.js"></script>
<script src="js/ejercicios.js"></script>
<script src="js/utils.js"></script>
<link  rel="stylesheet" type="text/css" href="css/styles.css">    
 <script>   
 var respuestasCorrectas;
 var simulacionErrorCPU;
 var simulacionErrorPlayer;
 var contestacionCPU;
 var movimiento=0;
 var posicionInicial;
 var isApertura;
 var isPartida=false;
 var $status;
 var $fen;
 var $pgn;
 var $lastMove;
 var $bestMove;
 var $nombre;
 var ejerciciosJugados= [];
 
 var config = {
		  draggable: true,
		  position: 'start',
		  onDragStart: onDragStart,
		  onDrop: onDrop,
		  onMouseoutSquare: onMouseoutSquare,
		  onMouseoverSquare: onMouseoverSquare,
		  onSnapEnd: onSnapEnd
		}


 
 
      function cargarEjercicio(){
	 	
	 
			 if (ejerciciosJugados.length == ejercicios.length){
				 alert("Ya has completado todos los ejercicios")
			 }else{
				 var numero=getRandomMaxNumber(ejercicios.length);
				
				 	while (ejerciciosJugados.includes(numero)){
				 		 numero=getRandomMaxNumber(ejercicios.length)
				 	}

				 //SOLO PARA PROBAR
				 
				 //	numero=ejercicios.length-1;
				

				 isApertura=false;
			     $nombre.html('<h1>'+ejercicios[numero].nombre+'</h1>');
			     posicionInicial=ejercicios[numero].posicionInicial;
			     respuestasCorrectas=ejercicios[numero].jugadasPlayer;
			     contestacionCPU=ejercicios[numero].jugadasCPU;
			     board.orientation(ejercicios[numero].orientation)
			     loadInitialPosition(posicionInicial)
			     ejerciciosJugados.push(numero);
			 }
       
      }

 
 $( document ).ready(function() {
	 $status = $('#status')
	 $fen = $('#fen')
	 $pgn = $('#pgn')
	 $lastMove = $('#lastMove')
	 $bestMove = $('#bestMove')
	 $nombre = $('#nombre')
	 
	 	$( "#responder" ).click(function() {
     		comprobarRespuesta();
  		});
	 
	 
	 
 		board = Chessboard('myBoard', config)
 	
		//cargarEjercicio(ejercicios.length-1)
 		cargarEjercicio();
	 	
 });
 
  </script> 
  <style>
	@media (orientation: landscape) {
	  .tablero{
	  	width: 50%;
	  }
	}
	
	@media (orientation: portrait) {
	  .tablero{
	  	width: 90%;
	  }
	}
</style>
  </head>


<body>


<div id="nombre" class="container-fluid text-center text-white"><h1>Nombre</h1> </div>
  <div id="myBoard" class="tablero container-fluid"></div>
  <div id="quiz" class="fluid bg-info p-1 overflow-scroll text-center"> 
		<p class="p-0 m-0 bg-white"> ¿Qué pregunta de no se qué cosa te hago aquí?</p>
		<p class="p-0 m-0">
				<input class="form-check-input" type="checkbox" value="1" id="flexCheckDefault">
  			<label class="form-check-label" for="flexCheckDefault">
    				Opcion 1
  			</label>
  	</p>
  	<p class="p-0 m-0"> 
  			<input class="form-check-input" type="checkbox" value="2" id="flexCheckDefault2">
  			<label class="form-check-label" for="flexCheckDefault2">
    				Opcion 2
  			</label>
  	</p>
  	<p class="p-0 m-0">
  		<input class="form-check-input" type="checkbox" value="3" id="flexCheckDefault3">
  		<label class="form-check-label" for="flexCheckDefault3">
    	Opcion 3
  		</label>
  	</p>
  	<p class="p-0 m-0">
  		<input class="form-check-input" type="checkbox" value="4" id="flexCheckDefault4">
  		<label class="form-check-label" for="flexCheckDefault4">
    	Opcion 4
  		</label>
  	</p>
  	<p><button id="responder" class="bg-success text-white"> Responder </button></p>
	</div>


  <a href="index.html"><div class="text-center fluid h3 bg-primary p-2 text-white">Volver</div></a>
  <label>Status:</label>
  <div id="status"></div>
  <label>FEN:</label>
  <div id="fen"></div>
  <label>PGN:</label>
  <div id="pgn"></div>
  <label>Last Move:</label>
  <div id="lastMove"></div>
  <label>Best Move:</label>
  <div id="bestMove"></div>
  <label>Jugada Error:</label>
  <div id="bestMove"></div>
</body>
</html>